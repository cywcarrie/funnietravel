"use strict";(self["webpackChunkfunnietravel"]=self["webpackChunkfunnietravel"]||[]).push([[843],{4843:function(t,e,s){s.r(e),s.d(e,{default:function(){return nt}});var a=s(6252),i=s(9963),n=s(3577);const l=(0,a._)("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[(0,a._)("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"購物車")],-1),o={class:"mb-5"},c={class:"container"},r=(0,a._)("i",{class:"bi bi-arrow-left-square-fill fs-2"},null,-1),d=[r],u={"aria-label":"breadcrumb",class:"mt-3 mb-md-4 d-flex justify-content-start"},p={class:"breadcrumb"},h={class:"breadcrumb-item"},b=(0,a._)("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1),m=(0,a._)("div",{class:"d-flex justify-content-center mt-5"},[(0,a._)("h2",{class:"fs-2 fw-bold"},"購物車清單")],-1),g={class:"d-flex justify-content-between mt-4"},f=(0,a._)("i",{class:"bi bi-cart pe-1"},null,-1),_=(0,a._)("i",{class:"bi bi-trash3 pe-1"},null,-1),y={class:"row mt-4 mb-5 bg-light rounded-2 py-3"},w={class:"col table-responsive mt-4 mb-4"},v={class:"table align-middle text-center table-light table-borderless"},x=(0,a._)("thead",{class:"table-secondary"},[(0,a._)("tr",{class:"table-nowrap"},[(0,a._)("th",{class:"text-nowrap"},"行程名稱"),(0,a._)("th",{class:"text-nowrap"},"數量"),(0,a._)("th",{class:"text-end"},"單價"),(0,a._)("th",{class:"text-end"},"小計"),(0,a._)("th",{class:"text-end"})])],-1),k={class:"text-center"},C=["onClick"],$={key:0,class:"text-success"},q={class:"text-nowrap"},L={class:"d-flex justify-content-center"},D={class:"input-group input-group-sm cart-qty"},U=["disabled","onChange","onUpdate:modelValue"],j={class:"input-group-text"},I={class:"text-end text-nowrap"},W={class:"text-end text-nowrap"},z={key:0,class:"text-success"},M=["disabled","onClick"],S=(0,a._)("i",{class:"bi bi-trash"},null,-1),V=[S],A=(0,a._)("td",{colspan:"3",class:"text-end fs-4"},"總計",-1),H={class:"text-end fs-4 text-primary fw-bold"},Y={key:0},Z=(0,a._)("td",{colspan:"3",class:"text-end text-success fs-4"},"優惠價",-1),E={class:"text-end text-success fs-4 fw-bold"},F={class:"d-flex justify-content-end align-items-center"},N={key:0,class:"input-group mb-3 coupon-input"},P=(0,a.uE)('<div class="d-flex justify-content-end align-items-center mb-2"><div class="fs-6 fw-bold text-primary"><i class="bi bi-globe pe-2"></i>輸入優惠碼 <span class="fs-5 fw-bold text-secondary">funnietravel</span> 即享 <span class="fs-5 fw-bold text-secondary">85 </span>折優惠</div></div>',1),R={class:"d-flex justify-content-end align-items-center mb-4"},K=(0,a._)("span",null,[(0,a._)("i",{class:"bi bi-clipboard-fill pe-1"}),(0,a._)("span",null,"複製優惠碼")],-1),T=[K],B={key:0,class:"text-end mt-4 mb-4"},G=(0,a._)("i",{class:"bi bi-caret-right-fill"},null,-1),J={key:1,class:"py-5 mb-5"},O={class:"text-center pt-4"},Q=(0,a._)("h2",{class:"fw-bolder mb-5"},"您尚未有行程加入購物車",-1);function X(t,e,s,r,S,K){const X=(0,a.up)("Navbar"),tt=(0,a.up)("LoadingVue"),et=(0,a.up)("RouterLink"),st=(0,a.up)("Footer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(X),(0,a.Wm)(tt,{active:S.isLoading,loader:"dots",color:"#336b87",width:70,height:70},null,8,["active"]),l,(0,a._)("section",o,[(0,a._)("div",c,[(0,a._)("a",{href:"#",title:"回上一頁",class:"text-secondary fw-bold",onClick:e[0]||(e[0]=(0,i.iM)((e=>t.$router.go(-1)),["prevent"]))},d),(0,a._)("nav",u,[(0,a._)("ol",p,[(0,a._)("li",h,[(0,a.Wm)(et,{to:"/",class:"text-dark hover-nav fw-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)("首頁")])),_:1})]),b])]),0!==S.cart.total?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[m,(0,a._)("div",g,[(0,a.Wm)(et,{class:"btn btn-outline-primary",to:"/products/全部"},{default:(0,a.w5)((()=>[f,(0,a.Uk)("繼續選購")])),_:1}),(0,a._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e[1]||(e[1]=(...t)=>K.deleteAllCart&&K.deleteAllCart(...t))},[_,(0,a.Uk)("清空購物車 ")])]),(0,a._)("div",y,[(0,a._)("div",w,[(0,a._)("table",v,[x,(0,a._)("tbody",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(S.cart.carts,(e=>((0,a.wg)(),(0,a.iD)("tr",{class:"table-nowrap",key:e.id},[(0,a._)("td",{class:"text-nowrap fw-bold text-primary cursor-pointer hover-nav",onClick:t=>K.getProduct(e.product_id)},[(0,a.Uk)((0,n.zw)(e.product.title)+" ",1),e.coupon?((0,a.wg)(),(0,a.iD)("div",$," 已套用優惠券 ")):(0,a.kq)("",!0)],8,C),(0,a._)("td",q,[(0,a._)("div",L,[(0,a._)("div",D,[(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",min:"1",disabled:e.id===S.status.loadingItem,onChange:t=>K.updateCart(e),"onUpdate:modelValue":t=>e.qty=t},null,40,U),[[i.nr,e.qty,void 0,{number:!0}]]),(0,a._)("div",j,"/ "+(0,n.zw)(e.product.unit),1)])])]),(0,a._)("td",I,(0,n.zw)(t.$filters.currency(e.product.price)),1),(0,a._)("td",W,[S.cart.final_total!==S.cart.total?((0,a.wg)(),(0,a.iD)("small",z,"優惠價：")):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,n.zw)(t.$filters.currency(e.final_total)),1)]),(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:S.status.loadingItem===e.id,onClick:t=>K.removeCartItem(e.id)},V,8,M)])])))),128))]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[A,(0,a._)("td",H,(0,n.zw)(t.$filters.currency(S.cart.total)),1)]),S.cart.final_total!==S.cart.total?((0,a.wg)(),(0,a.iD)("tr",Y,[Z,(0,a._)("td",E,(0,n.zw)(t.$filters.currency(S.cart.final_total)),1)])):(0,a.kq)("",!0)])])]),(0,a._)("div",F,[0!==S.cart.total?((0,a.wg)(),(0,a.iD)("div",N,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control border-primary","onUpdate:modelValue":e[2]||(e[2]=t=>S.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[i.nr,S.coupon_code]]),(0,a._)("button",{class:"btn btn-outline-primary",type:"button",onClick:e[3]||(e[3]=(...t)=>K.addCouponCode&&K.addCouponCode(...t))}," 套用優惠碼 ")])):(0,a.kq)("",!0)]),P,(0,a._)("div",R,[(0,a._)("button",{onClick:e[4]||(e[4]=(...t)=>K.copyCouponCode&&K.copyCouponCode(...t)),class:"btn btn-outline-primary",type:"button"},T)]),0!==S.cart.total?((0,a.wg)(),(0,a.iD)("div",B,[(0,a.Wm)(et,{class:"btn btn-primary",to:"/checkout"},{default:(0,a.w5)((()=>[(0,a.Uk)("前往結帳"),G])),_:1})])):(0,a.kq)("",!0)])],64)):(0,a.kq)("",!0),0===S.cart.total?((0,a.wg)(),(0,a.iD)("div",J,[(0,a._)("div",O,[Q,(0,a.Wm)(et,{class:"btn btn-primary btn-lg fw-bold",to:"/products/全部"},{default:(0,a.w5)((()=>[(0,a.Uk)("馬上開始選購吧 !")])),_:1})])])):(0,a.kq)("",!0)])]),(0,a.Wm)(st)],64)}s(7658);var tt=s(4564),et=s(8520),st={components:{Navbar:tt.Z,Footer:et.Z},data(){return{isLoading:!1,carts:[],total:0,final_total:0,coupon_code:"",cart:{},status:{loadingItem:""}}},inject:["emitter"],methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/funnie-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/funnie-api/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{t.data.success&&(this.status.loadingItem="",this.getCart(),this.emitter.emit("update-cart"))})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},deleteAllCart(){const t="https://vue3-course-api.hexschool.io/api/funnie-api/carts";this.isLoading=!0,this.$http.delete(t).then((t=>{this.$httpMessageState(t,"清空購物車"),this.getCart(),this.isLoading=!1})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/funnie-api/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.$httpMessageState(t,"移除購物車"),this.emitter.emit("update-cart"),this.status.loadingItem="",this.getCart(),this.isLoading=!1})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/funnie-api/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},getProduct(t){this.$router.push(`/product/${t}`)},copyCouponCode(){const t=document.createElement("input"),e="funnietravel";t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(e).then((()=>{this.emitter.emit("push-message",{style:"success",title:"優惠碼複製成功"})}))}},created(){this.getCart()}},at=s(3744);const it=(0,at.Z)(st,[["render",X]]);var nt=it}}]);
//# sourceMappingURL=843.956e78cb.js.map