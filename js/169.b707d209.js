"use strict";(self["webpackChunkfunnietravel"]=self["webpackChunkfunnietravel"]||[]).push([[169],{6169:function(e,l,a){a.r(l),a.d(l,{default:function(){return ke}});var s=a(6252),t=a(3577),r=a(9963);const o=(0,s._)("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner2 container-fluid"},[(0,s._)("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"結帳流程")],-1),c={class:"mb-5"},d={class:"container"},i=(0,s.uE)('<div class="d-flex justify-content-center align-items-center my-5"><h5 class="fw-bold mb-0 text-secondary pay-header active">填寫資料</h5><i class="bi bi-caret-right-fill fs-5 mx-2 text-secondary"></i><h5 class="fw-bold mb-0 text-secondary pay-header">確認付款</h5><i class="bi bi-caret-right-fill fs-5 mx-2 text-secondary"></i><h5 class="fw-bold mb-0 text-secondary pay-header">訂單完成</h5></div>',1),m={class:"row my-5 py-5 justify-content-center"},n={class:"col-12 col-md-8"},u={class:"col-12"},f=(0,s._)("h3",{class:"text-center fw-bold mb-4"},"行程明細",-1),b={class:"table-responsive-md mb-5 mb-lg-0"},p={class:"table align-middle table-borderless"},h=(0,s._)("thead",{class:"text-center table-secondary"},[(0,s._)("tr",{class:"table-nowrap"},[(0,s._)("th",null,"行程名稱"),(0,s._)("th",{class:"text-nowrap"},"數量"),(0,s._)("th",{class:"text-end"},"價格")])],-1),_={class:"text-center"},v={class:"table-nowrap fw-bold text-primary"},g={class:"text-nowrap"},x={class:"text-end text-nowrap"},y={key:0,class:"text-success text-end"},w=(0,s._)("td",{colspan:"2",class:"text-end fs-5"},"總計",-1),k={class:"text-end fs-5 text-primary fw-bold"},V={key:0},W=(0,s._)("td",{colspan:"2",class:"text-end text-success fs-5"},"優惠價",-1),U={class:"text-end text-success fs-5 fw-bold"},q={class:"col-12"},C={class:"row d-flex justify-content-center mt-5"},N=(0,s._)("h3",{class:"text-center fw-bold mb-4"},"訂購人資訊",-1),D={class:"mb-3"},$=(0,s._)("label",{for:"name",class:"form-label"},[(0,s.Uk)("訂購人姓名"),(0,s._)("small",{class:"ps-1 text-danger fw-bold"},"*")],-1),L={class:"mb-3"},M=(0,s._)("label",{for:"email",class:"form-label"},[(0,s.Uk)("訂購人電子信箱"),(0,s._)("small",{class:"ps-1 text-danger fw-bold"},"*")],-1),j={class:"mb-3"},z=(0,s._)("label",{for:"tel",class:"form-label"},[(0,s.Uk)("訂購人電話"),(0,s._)("small",{class:"ps-1 text-danger fw-bold"},"*")],-1),A={class:"mb-3"},F=(0,s._)("label",{for:"address",class:"form-label"},[(0,s.Uk)("訂購人地址"),(0,s._)("small",{class:"ps-1 text-danger fw-bold"},"*")],-1),P={class:"mb-3"},T={class:"col-12 d-flex flex-md-row flex-column align-md-items-center"},Y=(0,s._)("legend",{class:"form-label me-md-4 me-0 fs-6 fs-md-5 w-auto mb-2 mb-md-0"},[(0,s.Uk)(" 付款方式"),(0,s._)("small",{class:"ps-1 text-danger fw-bold"},"*")],-1),E={class:"d-flex"},Z={class:"form-check form-radio me-3"},H=(0,s._)("label",{class:"form-check-label",for:"信用卡"},"信用卡",-1),O={class:"form-check form-radio me-3"},S=(0,s._)("label",{class:"form-check-label",for:"ATM 轉帳"},"ATM 轉帳",-1),I={class:"form-check form-radio"},K=(0,s._)("label",{class:"form-check-label",for:"linePay"},"Line Pay",-1),R={class:"mb-2 mb-md-0"},B={key:0,class:"mb-3"},G=(0,s._)("label",{for:"cardNum",class:"form-label"},[(0,s.Uk)("信用卡號"),(0,s._)("small",{class:"ps-1 text-danger fw-bold"},"*")],-1),J={class:"row"},Q={class:"col-12"},X={class:"my-3 col-12 col-md-6"},ee=(0,s._)("label",{for:"period",class:"form-label required"},[(0,s.Uk)("有效日期"),(0,s._)("small",{class:"ps-1 text-danger fw-bold"},"*")],-1),le={class:"mb-3 col-12 col-md-6"},ae=(0,s._)("label",{for:"checkCode",class:"form-label required"},[(0,s.Uk)("檢查碼"),(0,s._)("small",{class:"ps-1 text-danger fw-bold"},"*")],-1),se={class:"mb-3"},te={class:"col-12 d-flex align-items-center"},re=(0,s._)("legend",{class:"form-label me-4 mb-0 fs-6 fs-md-5 w-auto"},[(0,s.Uk)(" 發票類型"),(0,s._)("small",{class:"ps-1 text-danger fw-bold"},"*")],-1),oe={class:"d-flex"},ce={class:"form-check form-radio me-3"},de=(0,s._)("label",{class:"form-check-label",for:"紙本發票"},"紙本發票",-1),ie={class:"form-check form-radio"},me=(0,s._)("label",{class:"form-check-label",for:"電子載具"},"電子載具",-1),ne={key:1,class:"mb-3"},ue={class:"mb-3"},fe=(0,s._)("label",{for:"message",class:"form-label"},"留言",-1),be={class:"d-flex justify-content-between"},pe=(0,s._)("i",{class:"bi bi-caret-left-fill"},null,-1),he=(0,s._)("button",{type:"submit",class:"btn btn-primary"},[(0,s.Uk)("確認訂單"),(0,s._)("i",{class:"bi bi-caret-right-fill"})],-1);function _e(e,l,a,_e,ve,ge){const xe=(0,s.up)("Navbar"),ye=(0,s.up)("LoadingVue"),we=(0,s.up)("FieldVue"),ke=(0,s.up)("ErrorMessage"),Ve=(0,s.up)("RouterLink"),We=(0,s.up)("FormVue"),Ue=(0,s.up)("Footer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(xe),(0,s.Wm)(ye,{active:ve.isLoading,loader:"dots",color:"#336b87",width:70,height:70},null,8,["active"]),o,(0,s._)("section",c,[(0,s._)("div",d,[i,(0,s._)("div",m,[(0,s._)("div",n,[(0,s._)("div",u,[f,(0,s._)("div",b,[(0,s._)("table",p,[h,(0,s._)("tbody",_,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ve.cart.carts,(l=>((0,s.wg)(),(0,s.iD)("tr",{class:"table-nowrap",key:l.id},[(0,s._)("td",v,(0,t.zw)(l.product.title),1),(0,s._)("td",g,(0,t.zw)(l.qty)+"/"+(0,t.zw)(l.product.unit),1),(0,s._)("td",x,[ve.cart.final_total!==ve.cart.total?((0,s.wg)(),(0,s.iD)("small",y,"優惠價：")):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,t.zw)(e.$filters.currency(l.final_total)),1)])])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[w,(0,s._)("td",k,(0,t.zw)(e.$filters.currency(ve.cart.total)),1)]),ve.cart.final_total!==ve.cart.total?((0,s.wg)(),(0,s.iD)("tr",V,[W,(0,s._)("td",U,(0,t.zw)(e.$filters.currency(ve.cart.final_total)),1)])):(0,s.kq)("",!0)])])])]),(0,s._)("div",q,[(0,s._)("div",C,[N,(0,s.Wm)(We,{onSubmit:ge.createOrder,class:"col-12"},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",D,[$,(0,s.Wm)(we,{id:"name",name:"姓名",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:ve.form.user.name,"onUpdate:modelValue":l[0]||(l[0]=e=>ve.form.user.name=e)},null,8,["class","modelValue"]),(0,s.Wm)(ke,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",L,[M,(0,s.Wm)(we,{id:"email",name:"email",type:"email",class:(0,t.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:ve.form.user.email,"onUpdate:modelValue":l[1]||(l[1]=e=>ve.form.user.email=e)},null,8,["class","modelValue"]),(0,s.Wm)(ke,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",j,[z,(0,s.Wm)(we,{id:"tel",name:"電話",type:"tel",class:(0,t.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"不含 - 符號的手機或室話",rules:"required|numeric|min:8|max:10",modelValue:ve.form.user.tel,"onUpdate:modelValue":l[2]||(l[2]=e=>ve.form.user.tel=e)},null,8,["class","modelValue"]),(0,s.Wm)(ke,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",A,[F,(0,s.Wm)(we,{id:"address",name:"地址",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:ve.form.user.address,"onUpdate:modelValue":l[3]||(l[3]=e=>ve.form.user.address=e)},null,8,["class","modelValue"]),(0,s.Wm)(ke,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",P,[(0,s._)("fieldset",T,[Y,(0,s._)("div",{class:(0,t.C_)(["normal-input",{error:e["付款方式"]}])},[(0,s._)("div",E,[(0,s._)("div",Z,[(0,s.Wm)(we,{class:"form-check-input",type:"radio",name:"付款方式",rules:"required",id:"信用卡",value:"信用卡",modelValue:ve.form.user.pay,"onUpdate:modelValue":l[4]||(l[4]=e=>ve.form.user.pay=e)},null,8,["modelValue"]),H]),(0,s._)("div",O,[(0,s.Wm)(we,{class:"form-check-input",type:"radio",name:"付款方式",rules:"required",id:"ATM 轉帳",value:"ATM 轉帳",modelValue:ve.form.user.pay,"onUpdate:modelValue":l[5]||(l[5]=e=>ve.form.user.pay=e)},null,8,["modelValue"]),S]),(0,s._)("div",I,[(0,s.Wm)(we,{class:"form-check-input",type:"radio",name:"付款方式",rules:"required",id:"linePay",value:"Line Pay",modelValue:ve.form.user.pay,"onUpdate:modelValue":l[6]||(l[6]=e=>ve.form.user.pay=e)},null,8,["modelValue"]),K])]),(0,s._)("div",R,[(0,s.Wm)(ke,{name:"付款方式",class:"error-text position-absolute text-danger mb-2 mb-md-0"})])],2)])]),"信用卡"===ve.form.user.pay?((0,s.wg)(),(0,s.iD)("div",B,[G,(0,s._)("div",J,[(0,s._)("div",Q,[(0,s.Wm)(we,{id:"cardNum",name:"卡號",type:"tel",class:(0,t.C_)(["form-control",{"is-invalid":e["卡號"]}]),maxlength:"19",placeholder:"**** **** **** ****",rules:"required",modelValue:ve.cardNumber,"onUpdate:modelValue":l[7]||(l[7]=e=>ve.cardNumber=e)},null,8,["class","modelValue"]),(0,s.Wm)(ke,{name:"卡號",class:"invalid-feedback"}),(0,s._)("div",X,[ee,(0,s.Wm)(we,{id:"period",name:"有效日期",type:"tel",class:(0,t.C_)(["form-control",{"is-invalid":e["有效日期"]}]),placeholder:"MM/YY",maxlength:"5",modelValue:ve.expiryDate,"onUpdate:modelValue":l[8]||(l[8]=e=>ve.expiryDate=e),rules:"required"},null,8,["modelValue","class"]),(0,s.Wm)(ke,{name:"有效日期",class:"invalid-feedback"})]),(0,s._)("div",le,[ae,(0,s.Wm)(we,{id:"checkCode",name:"檢查碼",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["檢查碼"]}]),maxlength:"3",placeholder:"CVC/CVV",rules:"required|length:3|numeric:true"},null,8,["class"]),(0,s.Wm)(ke,{name:"檢查碼",class:"invalid-feedback"})])])])])):(0,s.kq)("",!0),(0,s._)("div",se,[(0,s._)("fieldset",te,[re,(0,s._)("div",{class:(0,t.C_)(["normal-input",{error:e["發票類型"]}])},[(0,s._)("div",oe,[(0,s._)("div",ce,[(0,s.Wm)(we,{class:"form-check-input",type:"radio",name:"發票類型",rules:"required",id:"紙本發票",value:"紙本發票",modelValue:ve.form.user.bill,"onUpdate:modelValue":l[9]||(l[9]=e=>ve.form.user.bill=e)},null,8,["modelValue"]),de]),(0,s._)("div",ie,[(0,s.Wm)(we,{class:"form-check-input",type:"radio",name:"發票類型",rules:"required",id:"電子載具",value:"電子載具",modelValue:ve.form.user.bill,"onUpdate:modelValue":l[10]||(l[10]=e=>ve.form.user.bill=e)},null,8,["modelValue"]),me])]),(0,s.Wm)(ke,{name:"發票類型",class:"error-text position-absolute text-danger"})],2)])]),"電子載具"===ve.form.user.bill?((0,s.wg)(),(0,s.iD)("div",ne,[(0,s.Wm)(we,{name:"電子載具",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["電子載具"]}]),placeholder:"請輸入  '/'  開頭的載具號碼",rules:"required",modelValue:ve.form.user.billNum,"onUpdate:modelValue":l[11]||(l[11]=e=>ve.form.user.billNum=e)},null,8,["class","modelValue"]),(0,s.Wm)(ke,{name:"電子載具",class:"invalid-feedback"})])):(0,s.kq)("",!0),(0,s._)("div",ue,[fe,(0,s.wy)((0,s._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[12]||(l[12]=e=>ve.form.message=e)},null,512),[[r.nr,ve.form.message]])]),(0,s._)("div",be,[(0,s.Wm)(Ve,{class:"btn btn-outline-primary",to:"/cart"},{default:(0,s.w5)((()=>[pe,(0,s.Uk)("回上一頁")])),_:1}),he])])),_:1},8,["onSubmit"])])])])])])]),(0,s.Wm)(Ue)],64)}a(7658);var ve=a(4564),ge=a(8520),xe={components:{Navbar:ve.Z,Footer:ge.Z},data(){return{isLoading:!1,total:0,final_total:0,form:{user:{name:"",email:"",tel:"",address:"",pay:"",bill:"",billNum:""},message:""},cart:{},coupon_code:"",expiryDate:"",cardNumber:""}},inject:["emitter"],watch:{cardNumber(e,l){e.length<l.length&&" "===e.charAt(e.length-1)&&(this.cardNumber=l.slice(0,-2)),e.length>l.length&&(e.length+1)%5===0&&0!==this.cardNumber.length&&this.cardNumber.length<19&&(this.cardNumber=e+" ")},expiryDate(e,l){2===e.length&&e.length>l.length?this.expiryDate+="/":e.length<l.length&&"/"===l.charAt(2)&&3===l.length&&(this.expiryDate=l.slice(0,1))}},methods:{getCart(){const e="https://vue3-course-api.hexschool.io/api/funnie-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{this.cart=e.data.data,this.isLoading=!1})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:`${e.response.data.message}`})}))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/funnie-api/order",l=this.form;this.$http.post(e,{data:l}).then((e=>{this.$router.push(`/checkorder/${e.data.orderId}`)})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:`${e.response.data.message}`})}))}},created(){this.getCart()}},ye=a(3744);const we=(0,ye.Z)(xe,[["render",_e]]);var ke=we}}]);
//# sourceMappingURL=169.b707d209.js.map