"use strict";(self["webpackChunkfunnietravel"]=self["webpackChunkfunnietravel"]||[]).push([[829],{6829:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var i=s(6252),a=s(9963),r=s(3577);const l=(0,i._)("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[(0,i._)("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"我的最愛")],-1),o={class:"mb-5"},n={class:"container"},c=(0,i._)("i",{class:"bi bi-arrow-left-square-fill fs-2"},null,-1),d=[c],u={"aria-label":"breadcrumb",class:"mt-3 mb-md-4 d-flex justify-content-start"},b={class:"breadcrumb"},p={class:"breadcrumb-item"},h=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},"我的最愛",-1),m=(0,i._)("div",{class:"d-flex justify-content-center mt-5"},[(0,i._)("h1",{class:"fs-2 fw-bold"},"我的最愛清單")],-1),g={class:"row mt-4 mb-5 bg-light rounded-2 py-3"},f={class:"col table-responsive mt-4 mb-4"},v={class:"table align-middle text-center table-light table-borderless"},_=(0,i._)("thead",{class:"table-secondary"},[(0,i._)("tr",null,[(0,i._)("th"),(0,i._)("th",{class:"text-nowrap"},"行程名稱"),(0,i._)("th",{class:"text-nowrap"},"價格"),(0,i._)("th"),(0,i._)("th"),(0,i._)("th",{class:"text-end"})])],-1),y={class:"text-center"},w={class:"favorite-table"},x={class:"text-nowrap fw-bold text-primary"},k={class:"text-nowrap"},D={key:0,class:"h5 text-secondary"},$={key:1,class:"h6 text-secondary"},C={key:2,class:"h5 text-primary"},F={class:"text-nowrap text-end ps-4 ps-lg-0"},I=["disabled","onClick"],L={key:0,class:"spinner-border text-primary spinner-border-sm",role:"status"},P=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),N=[P],q=(0,i._)("i",{class:"bi bi-cart-fill"},null,-1),U={class:"text-nowrap"},W=["onClick"],j=(0,i._)("i",{class:"bi bi-search"},null,-1),S=["disabled","onClick"],z=(0,i._)("i",{class:"bi bi-x-lg"},null,-1),O=[z],H={class:"text-end mt-4 mb-5"},T=(0,i._)("i",{class:"bi bi-cart-fill ps-1"},null,-1),Y={key:1,class:"py-5 mb-5"},Z={class:"text-center pt-4"},J=(0,i._)("h2",{class:"fw-bold mb-5"},"您尚未有行程加入我的最愛",-1);function M(t,e,s,c,P,z){const M=(0,i.up)("Navbar"),K=(0,i.up)("LoadingVue"),R=(0,i.up)("RouterLink"),V=(0,i.up)("Footer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(M),(0,i.Wm)(K,{active:P.isLoading,loader:"dots",color:"#336b87",width:70,height:70},null,8,["active"]),l,(0,i._)("section",o,[(0,i._)("div",n,[(0,i._)("a",{href:"#",title:"回上一頁",class:"text-secondary fw-bold",onClick:e[0]||(e[0]=(0,a.iM)((e=>t.$router.go(-1)),["prevent"]))},d),(0,i._)("nav",u,[(0,i._)("ol",b,[(0,i._)("li",p,[(0,i.Wm)(R,{to:"/",class:"text-dark hover-nav fw-bold"},{default:(0,i.w5)((()=>[(0,i.Uk)("首頁")])),_:1})]),h])]),0!==P.favoriteProduct.length?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[m,(0,i._)("div",g,[(0,i._)("div",f,[(0,i._)("table",v,[_,(0,i._)("tbody",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(P.favoriteProduct,(e=>((0,i.wg)(),(0,i.iD)("tr",{class:"table-nowrap",key:e.id},[(0,i._)("td",w,[(0,i._)("div",{class:"m-auto rounded-2 favorite-table-img",style:(0,r.j5)({backgroundImage:`url(${e.imageUrl})`})},null,4)]),(0,i._)("td",x,(0,r.zw)(e.title),1),(0,i._)("td",k,[e.price?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",D,"NTD "+(0,r.zw)(t.$filters.currency(e.origin_price)),1)),e.price?((0,i.wg)(),(0,i.iD)("del",$,"NTD "+(0,r.zw)(t.$filters.currency(e.origin_price)),1)):(0,i.kq)("",!0),e.price?((0,i.wg)(),(0,i.iD)("div",C,"NTD "+(0,r.zw)(t.$filters.currency(e.price)),1)):(0,i.kq)("",!0)]),(0,i._)("td",F,[(0,i._)("button",{type:"button",class:"btn btn-outline-primary px-5",disabled:this.status.loadingItem===e.id,onClick:t=>z.addCart(e.id)},[this.status.loadingItem===e.id?((0,i.wg)(),(0,i.iD)("div",L,N)):(0,i.kq)("",!0),q,(0,i.Uk)(" 加入購物車 ")],8,I)]),(0,i._)("td",U,[(0,i._)("button",{type:"button",class:"btn btn-outline-primary",onClick:t=>z.getProduct(e.id)},[j,(0,i.Uk)(" 查看更多 ")],8,W)]),(0,i._)("td",null,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:P.status.loadingItem===e.id,onClick:t=>z.removeFavorite(e)},O,8,S)])])))),128))])])])]),(0,i._)("div",H,[(0,i.Wm)(R,{class:"btn btn-primary ms-auto text-end hover-btn",to:"/cart"},{default:(0,i.w5)((()=>[(0,i.Uk)("前往購物車"),T])),_:1})])],64)):((0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("div",Z,[J,(0,i.Wm)(R,{class:"btn btn-primary btn-lg fw-bold",to:"/products/全部"},{default:(0,i.w5)((()=>[(0,i.Uk)("馬上開始瀏覽行程吧 !")])),_:1})])]))])]),(0,i.Wm)(V)],64)}s(7658);var K=s(4564),R=s(8520),V={components:{Navbar:K.Z,Footer:R.Z},data(){return{isLoading:!1,products:[],favoriteProduct:[],favoriteData:JSON.parse(localStorage.getItem("favorite"))||[],status:{loadingItem:""}}},inject:["emitter"],methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/funnie-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,this.getFavorite(),this.isLoading=!1})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},getProduct(t){this.$router.push(`/product/${t}`)},getFavorite(){this.favoriteProduct=this.products.filter((t=>-1!==this.favoriteData.indexOf(t.id)))},addCart(t){const e="https://vue3-course-api.hexschool.io/api/funnie-api/cart";this.status.loadingItem=t;const s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{this.$httpMessageState(t,"加入購物車"),this.emitter.emit("update-cart"),this.status.loadingItem=""})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},removeFavorite(t){this.isLoading=!0,this.favoriteData.splice(this.favoriteData.indexOf(t.id),1),localStorage.setItem("favorite",JSON.stringify(this.favoriteData)),this.emitter.emit("update-favorite"),this.isLoading=!1,this.emitter.emit("push-message",{style:"success",title:"已從我的最愛移除"})}},mounted(){this.getFavorite(),this.emitter.on("update-favorite",(()=>{this.getFavorite()}))},unmounted(){this.emitter.off("update-favorite",this.getFavorite)},created(){this.getProducts()}},A=s(3744);const B=(0,A.Z)(V,[["render",M]]);var E=B}}]);
//# sourceMappingURL=829.5ed87eb3.js.map