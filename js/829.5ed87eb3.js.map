{"version":3,"file":"js/829.5ed87eb3.js","mappings":"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","sources":["webpack://funnietravel/./src/views/front/UserFavoriteView.vue","webpack://funnietravel/./src/views/front/UserFavoriteView.vue?db27"],"sourcesContent":["<template>\r\n  <Navbar />\r\n  <LoadingVue :active=\"isLoading\" :loader=\"'dots'\" :color=\"'#336b87'\" :width=\"70\" :height=\"70\" />\r\n  <div class=\"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid\">\r\n    <h2 class=\"position-absolute text-center text-white fw-bolder banner-title\">我的最愛</h2>\r\n  </div>\r\n  <section class=\"mb-5\">\r\n    <div class=\"container\">\r\n      <a href=\"#\" title=\"回上一頁\" class=\"text-secondary fw-bold\" @click.prevent=\"$router.go(-1)\"><i class=\"bi bi-arrow-left-square-fill fs-2\"></i></a>\r\n      <nav aria-label=\"breadcrumb\" class=\"mt-3 mb-md-4 d-flex justify-content-start\">\r\n        <ol class=\"breadcrumb\">\r\n          <li class=\"breadcrumb-item\"><RouterLink to=\"/\" class=\"text-dark hover-nav fw-bold\">首頁</RouterLink></li>\r\n          <li class=\"breadcrumb-item active\" aria-current=\"page\">我的最愛</li>\r\n        </ol>\r\n      </nav>\r\n      <template v-if=\"favoriteProduct.length!==0\">\r\n        <div class=\"d-flex justify-content-center mt-5\">\r\n        <h1 class=\"fs-2 fw-bold\">我的最愛清單</h1>\r\n        </div>\r\n        <div class=\"row mt-4 mb-5 bg-light rounded-2 py-3\">\r\n          <div class=\"col table-responsive mt-4 mb-4\">\r\n            <table class=\"table align-middle text-center table-light table-borderless\">\r\n              <thead class=\"table-secondary\">\r\n                <tr>\r\n                  <th></th>\r\n                  <th class=\"text-nowrap\">行程名稱</th>\r\n                  <th class=\"text-nowrap\">價格</th>\r\n                  <th></th>\r\n                  <th></th>\r\n                  <th class=\"text-end\"></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody class=\"text-center\">\r\n              <tr class=\"table-nowrap\" v-for=\"item in favoriteProduct\" :key=\"item.id\">\r\n                <td class=\"favorite-table\">\r\n                <div class=\"m-auto rounded-2 favorite-table-img\"\r\n                :style=\"{backgroundImage: `url(${item.imageUrl})`}\"></div>\r\n                </td>\r\n                <td class=\"text-nowrap fw-bold text-primary\">{{ item.title }}</td>\r\n                <td class=\"text-nowrap\">\r\n                  <div class=\"h5 text-secondary\" v-if=\"!item.price\">NTD {{ $filters.currency(item.origin_price) }} </div>\r\n                  <del class=\"h6 text-secondary\" v-if=\"item.price\">NTD {{ $filters.currency(item.origin_price) }} </del>\r\n                  <div class=\"h5 text-primary\" v-if=\"item.price\">NTD {{ $filters.currency(item.price) }} </div>\r\n                </td>\r\n                <td class=\"text-nowrap text-end ps-4 ps-lg-0\">\r\n                  <button type=\"button\" class=\"btn btn-outline-primary px-5\"\r\n                  :disabled=\"this.status.loadingItem === item.id\"\r\n                  @click=\"addCart(item.id)\">\r\n                    <div v-if=\"this.status.loadingItem === item.id\"\r\n                    class=\"spinner-border text-primary spinner-border-sm\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                    <i class=\"bi bi-cart-fill\"></i>\r\n                    加入購物車\r\n                  </button>\r\n                </td>\r\n                <td class=\"text-nowrap\">\r\n                  <button type=\"button\" class=\"btn btn-outline-primary\"\r\n                  @click=\"getProduct(item.id)\">\r\n                  <i class=\"bi bi-search\"></i>\r\n                    查看更多\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button type=\"button\" class=\"btn btn-outline-danger btn-sm\"\r\n                  :disabled=\"status.loadingItem === item.id\"\r\n                  @click=\"removeFavorite(item)\">\r\n                  <i class=\"bi bi-x-lg\"></i>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div class=\"text-end mt-4 mb-5\">\r\n          <RouterLink class=\"btn btn-primary ms-auto text-end hover-btn\" to=\"/cart\">前往購物車<i class=\"bi bi-cart-fill ps-1\"></i></RouterLink>\r\n        </div>\r\n      </template>\r\n      <template v-else>\r\n        <div class=\"py-5 mb-5\">\r\n          <div class=\"text-center pt-4\">\r\n            <h2 class=\"fw-bold mb-5\">您尚未有行程加入我的最愛</h2>\r\n            <RouterLink class=\"btn btn-primary btn-lg fw-bold\" to=\"/products/全部\">馬上開始瀏覽行程吧 !</RouterLink>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </div>\r\n  </section>\r\n  <Footer />\r\n</template>\r\n\r\n<script>\r\nimport Navbar from '@/components/UserNavBar.vue'\r\nimport Footer from '@/components/FooterComponent.vue'\r\nexport default {\r\n  components: {\r\n    Navbar,\r\n    Footer\r\n  },\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      products: [],\r\n      favoriteProduct: [],\r\n      favoriteData: JSON.parse(localStorage.getItem('favorite')) || [],\r\n      status: {\r\n        loadingItem: '' // 對應品項 id\r\n      }\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getProducts () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(url).then((response) => {\r\n        this.products = response.data.products\r\n        this.getFavorite()\r\n        this.isLoading = false\r\n      }).catch(error => {\r\n        this.emitter.emit('push-message', {\r\n          style: 'danger',\r\n          title: `${error.response.data.message}`\r\n        })\r\n      })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/product/${id}`)\r\n    },\r\n    getFavorite () {\r\n      this.favoriteProduct = this.products.filter(item => this.favoriteData.indexOf(item.id) !== -1)\r\n    },\r\n    addCart (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(url, { data: cart })\r\n        .then((response) => {\r\n          this.$httpMessageState(response, '加入購物車')\r\n          this.emitter.emit('update-cart')\r\n          this.status.loadingItem = ''\r\n        }).catch(error => {\r\n          this.emitter.emit('push-message', {\r\n            style: 'danger',\r\n            title: `${error.response.data.message}`\r\n          })\r\n        })\r\n    },\r\n    removeFavorite (item) {\r\n      this.isLoading = true\r\n      this.favoriteData.splice(this.favoriteData.indexOf(item.id), 1)\r\n      localStorage.setItem('favorite', JSON.stringify(this.favoriteData))\r\n      this.emitter.emit('update-favorite')\r\n      this.isLoading = false\r\n      this.emitter.emit('push-message', {\r\n        style: 'success',\r\n        title: '已從我的最愛移除'\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getFavorite()\r\n    this.emitter.on('update-favorite', () => {\r\n      this.getFavorite()\r\n    })\r\n  },\r\n  unmounted () {\r\n    this.emitter.off('update-favorite', this.getFavorite)\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserFavoriteView.vue?vue&type=template&id=c180edf6\"\nimport script from \"./UserFavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./UserFavoriteView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","_hoisted_4","role","_hoisted_25","_hoisted_32","_createVNode","_component_Navbar","_component_LoadingVue","active","$data","isLoading","loader","color","width","height","_hoisted_1","_hoisted_2","_hoisted_3","href","title","onClick","_cache","_withModifiers","$event","_ctx","$router","go","_hoisted_6","_hoisted_7","_hoisted_8","_component_RouterLink","to","_hoisted_9","favoriteProduct","length","_createElementBlock","_Fragment","key","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_renderList","item","id","_hoisted_16","style","_normalizeStyle","backgroundImage","imageUrl","_hoisted_17","_toDisplayString","_hoisted_18","price","_hoisted_19","$filters","currency","origin_price","_hoisted_20","_hoisted_21","_hoisted_22","type","disabled","status","loadingItem","$options","addCart","_hoisted_24","_hoisted_26","_hoisted_27","_hoisted_28","getProduct","_hoisted_30","removeFavorite","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_component_Footer","components","Navbar","Footer","data","products","favoriteData","JSON","parse","localStorage","getItem","inject","methods","getProducts","url","this","$http","get","then","response","getFavorite","catch","error","emitter","emit","message","push","filter","indexOf","cart","product_id","qty","post","$httpMessageState","splice","setItem","stringify","mounted","on","unmounted","off","created","__exports__","render"],"sourceRoot":""}